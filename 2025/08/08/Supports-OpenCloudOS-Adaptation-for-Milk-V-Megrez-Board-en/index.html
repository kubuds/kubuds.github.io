<!DOCTYPE html>
<html>

<head>
  <!-- Basic Page Needs
    ================================================== -->
  <meta charset="utf-8">
  <base href="https://kubuds.io">
  <!-- Mobile Specific Metas
    ================================================== -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="Shanghai kubuds Technology Co., LTD">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
  <meta name="author" content="kubuds">
  <!-- Favicon -->
  <link rel="shortcut icon" type="image/x-icon" href="/assets/img/favicon.ico" />

  <!-- Preload critical resources -->
  <link rel="preload" href="/assets/img/home/home.webp" as="image" type="image/webp">
  <link rel="preload" href="/assets/css/style.css" as="style">
  <link rel="preload" href="/assets/js/lazy-loading.js" as="script">

  <!-- bootstrap.min css -->
  <link rel="stylesheet" href="/assets/plugins/bootstrap/bootstrap.min.css">
  <!-- Ionic Icon Css -->
  <link rel="stylesheet" href="/assets/plugins/Ionicons/css/ionicons.min.css">
  <!-- animate.css -->
  <link rel="stylesheet" href="/assets/plugins/animate-css/animate.css" media="print" onload="this.media='all'">
  <!-- Magnify Popup -->
  <link rel="stylesheet" href="/assets/plugins/magnific-popup/magnific-popup.css" media="print"
    onload="this.media='all'">
  <!-- Slick CSS -->
  <link rel="stylesheet" href="/assets/plugins/slick/slick.css" media="print" onload="this.media='all'">

  <!-- Main Stylesheet -->
  <link rel="stylesheet" href="/assets/css/style.css">

  <!-- Lazy Loading Stylesheet -->
  <link rel="stylesheet" href="/assets/css/lazy-loading.css">

  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function () {
        navigator.serviceWorker.register('/assets/js/sw.js')
          .then(function (registration) {
            console.log('ServiceWorker registration successful');
          })
          .catch(function (err) {
            console.log('ServiceWorker registration failed: ', err);
          });
      });
    }
  </script>

</head>
<!-- Header -->
<header class="navigation fixed-top d-flex align-items-center">
  <div class="container">

    <!-- <div class="logo me-auto"></div> -->
    <nav class="navbar navbar-expand-lg p-0">
      
      <!-- <h2><a href="/index.html">Kubuds</a></h2> -->
      <a class="navbar-brand" href="/index.html">
        <img class="logo" src="/assets/img/logos/kubuds_en.webp" alt="Logo">
      </a>
      

      <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarsExample09"
        aria-controls="navbarsExample09" aria-expanded="false" aria-label="Toggle navigation">
        <span class="ion-android-menu"></span>
      </button>

      <div class="collapse navbar-collapse ml-auto" id="navbarsExample09">
        <ul id="navbar-main" class="navbar-nav ml-auto ">
          <!-- <li class="nav-item active">
                
                <a class="nav-link" href="/">Home</a>
                
              </li> -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="dropdown05" data-toggle="dropdown" aria-haspopup="true"
              aria-expanded="false">Services <span class="ion-ios-arrow-down"></span></a>
            <ul class="dropdown-menu" aria-labelledby="dropdown05">
              
              <li><a class="dropdown-item" href="/service/simulator.html">Simulator</a></li>
              <li><a class="dropdown-item" href="/service/os.html">Operating System</a></li>
              <li><a class="dropdown-item" href="/service/toolchain.html">Toolchain</a></li>
              <li><a class="dropdown-item" href="/service/chip.html">Embedded Chip</a></li>

              <li><a class="dropdown-item" href="/service/ide.html">IDE</a></li>
              <li><a class="dropdown-item" href="/service/aisys.html">AI System</a></li>
              <li><a class="dropdown-item" href="/service/consultation.html">Consultation</a></li>
              
            </ul>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="dropdown05" data-toggle="dropdown" aria-haspopup="true"
              aria-expanded="false">Solutions <span class="ion-ios-arrow-down"></span></a>
            <ul class="dropdown-menu" aria-labelledby="dropdown05">
              
              <li><a class="dropdown-item" href="/solution/aosp.html">AOSP</a></li>
              
            </ul>
          </li>
          
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="dropdown05" data-toggle="dropdown" aria-haspopup="true"
              aria-expanded="false">About Us <span class="ion-ios-arrow-down"></span></a>
            <ul class="dropdown-menu" aria-labelledby="dropdown05">
              
              <li><a class="dropdown-item" href="/about.html">About Kubuds</a></li>
              <li><a class="dropdown-item" href="/post.html">News & Events</a></li>
              
            </ul>
          </li>

          <!-- <li class="nav-item ">
            
            <a class="nav-link" href="/career.html">Careers</a>
            
          </li> -->
        </ul>
        <ul class="navbar-nav ml-auto navbar-language">
          <li class="nav-item "><a class="nav-link">contact@kubuds.cn</a></li>
          <li class="nav-item dropdown">

            <a class="nav-link dropdown-toggle" href="#" id="dropdown05" data-toggle="dropdown" aria-haspopup="true"
              aria-expanded="false">
              <svg xmlns="http://www.w3.org/2000/svg" height="1.25rem" viewBox="0 -960 960 960" width="1.25rem"
                fill="#211f1f">
                <path
                  d="M480-96q-79 0-149-30t-122.5-82.5Q156-261 126-331T96-480q0-80 30-149.5t82.5-122Q261-804 331-834t149-30q80 0 149.5 30t122 82.5Q804-699 834-629.5T864-480q0 79-30 149t-82.5 122.5Q699-156 629.5-126T480-96Zm0-75q17-17 34-63.5T540-336H420q9 55 26 101.5t34 63.5Zm-91-10q-14-30-24.5-69T347-336H204q29 57 77 97.5T389-181Zm182 0q60-17 108-57.5t77-97.5H613q-7 47-17.5 86T571-181ZM177-408h161q-2-19-2.5-37.5T335-482q0-18 .5-35.5T338-552H177q-5 19-7 36.5t-2 35.5q0 18 2 35.5t7 36.5Zm234 0h138q2-20 2.5-37.5t.5-34.5q0-17-.5-35t-2.5-37H411q-2 19-2.5 37t-.5 35q0 17 .5 35t2.5 37Zm211 0h161q5-19 7-36.5t2-35.5q0-18-2-36t-7-36H622q2 19 2.5 37.5t.5 36.5q0 18-.5 35.5T622-408Zm-9-216h143q-29-57-77-97.5T571-779q14 30 24.5 69t17.5 86Zm-193 0h120q-9-55-26-101.5T480-789q-17 17-34 63.5T420-624Zm-216 0h143q7-47 17.5-86t24.5-69q-60 17-108 57.5T204-624Z" />
              </svg>
              English <span class="ion-ios-arrow-down"></span></a>
            <ul class="dropdown-menu" aria-labelledby="dropdown05">
              
              
              
              
              
              <li><a class="dropdown-item" href="ch/2025/08/08/Supports-OpenCloudOS-Adaptation-for-Milk-V-Megrez-Board-en/">
                  中文</a></li>
              
              
              
            </ul>
          </li>
        </ul>
      </div>
    </nav>

  </div>
</header>
<!-- Main jQuery -->
<script src="/assets/plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 3.1 -->
<script src="/assets/plugins/bootstrap/bootstrap.min.js"></script>
<!-- slick Carousel -->
<script src="/assets/plugins/slick/slick.min.js"></script>
<script src="/assets/plugins/magnific-popup/jquery.magnific-popup.min.js"></script>
<!-- filter -->
<script src="/assets/plugins/shuffle/shuffle.min.js"></script>
<script src="/assets/plugins/SyoTimer/jquery.syotimer.min.js"></script>
<!-- Google Map -->
<!-- <script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCcABaamniA6OL5YvYSpB3pFMNrXwXnLwU&libraries=places"></script>
<script src="/assets/plugins/google-map/map.js"></script> -->

<!-- Lazy Loading Script -->
<script src="/assets/js/lazy-loading.js"></script>

<script src="/assets/js/main.js"></script>

<head>
    <title>Supporting OpenCloudOS Adaptation for Milk-V Megrez Development Board - Kubuds</title>
</head>

<body>
    <main id="main">
        <section class="section-top section post-detail-section">
            <div class="container section-top">
                <div class="row section-top ">
                    <div class="col-lg-12 col-md-12 col-sm-12">
                        <!-- 面包屑导航 -->
                        <nav class="breadcrumb-nav">
                            <ol class="breadcrumb">
                                
                                <li class="breadcrumb-item"><a href="/">Home Page</a></li>
                                <li class="breadcrumb-item"><a href="/post.html#news-list" class="news-list-link">News & Events</a></li>
                                <li class="breadcrumb-item active">Supporting OpenCloudOS Adaptation for Milk-V Megrez Development Board</li>
                                
                            </ol>
                        </nav>
                        <div class="post-content-wrapper">
                            <div class="post-header text-center">
                                <h4>Supporting OpenCloudOS Adaptation for Milk-V Megrez Development Board</h4>
                                <div class="post-meta">
                                    <span class="post-date">2025年08月08日</span>
                                    <span class="post-author">RISC-V Prosperity 2036 Joint Training Program</span>
                                </div>
                            </div>
                            <div class="post-content">
                                <p>Recently, the OpenCloudOS RISC-V SIG successfully adapted the <strong>Milk-V Megrez</strong> development board. The adaptation results have been synchronized to the official OpenCloudOS mirror website and are available for download and testing</p>

<p>This work was completed by Malachite, an intern from the PLCT Laboratory of the Institute of Software, Chinese Academy of Sciences. The mentor was Sun Min, an engineer from Kubuds Technology, and the entrusted training community was the OpenCloudOS Community. This is part of the “RISC-V Prosperity 2036 Open-Source Intern Joint Recruitment and Training” program.</p>

<p><strong>About OpenCloudOS Stream</strong></p>

<p>OpenCloudOS Stream (hereinafter referred to as OC) is an independently controllable upstream distribution jointly developed by the OpenCloudOS community and its partners. Featuring full-stack optimization of both the kernel and user-space components, it provides an advanced, high-performance foundational environment. It effectively mitigates risks similar to the CentOS supply discontinuation and incorporates a series of proprietary kernel patches and features, such as allowing non-privileged processes to bind to low-numbered ports, process and mount point protection, and system call and socket auditing. This makes it particularly suitable for cloud-native and containerized applications.</p>

<p><strong>Milk-V Megrez Development Board Introduction</strong></p>

<p>The Milk-V Megrez is a RISC-V development board focused on AI and virtualization. It is equipped with a quad-core SiFive P550 CPU (ESWIN EIC7700X SoC, supporting the 64-bit RV64GBCH standard instruction set) with a maximum frequency of 1.8 GHz and supports up to 32 GB LPDDR5 memory (6400MT/s). The Megrez instruction set supports the H extension, which can effectively enhance native RISC-V virtualization performance.</p>

<p><img src="2025/08/08/Supports-OpenCloudOS-Adaptation-for-Milk-V-Megrez-Board/0.webp" alt="image" /></p>

<center> Megrez Development Board </center>

<p><strong>Adaptation Results Showcase</strong></p>

<p>Currently, OpenCloudOS Stream has achieved initial adaptation to the Milk-V Megrez, completing kernel compilation and boot-up processes. It can launch the minimal Wayland desktop environment, and various functions have been verified. The latest source code is available at [2]; feel free to check it out.</p>

<p><img src="2025/08/08/Supports-OpenCloudOS-Adaptation-for-Milk-V-Megrez-Board/1.webp" alt="image" /></p>

<center>Browser Support | Wayland Environment (Optional) | H Extension</center>

<p><img src="2025/08/08/Supports-OpenCloudOS-Adaptation-for-Milk-V-Megrez-Board/2.webp" alt="image" /></p>

<center>Functional Adaptation Progress (Benchmarked against RockOS)</center>

<p><strong>Experience the Adaptation Achievements in 3 Simple Steps</strong></p>

<ul>
  <li>
    <p><strong>Obtain the Distribution / Burn the Image</strong></p>

    <p>Download the image file from the OpenCloudOS official website [1]. After decompression, write it to a storage medium such as an eMMC or SD card. Tools like Etcher are recommended for burning the image.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>wget https://mirrors.opencloudos.tech/opencloudos-stream/releases/23/images/riscv64/sdcard/ocs_developer_sdcard-megrez.img.xz
</code></pre>
    </div>
  </li>
  <li>
    <p><strong>Power On and Boot</strong></p>

    <p>Note: Before powering on, the development board must be connected to the host machine via a serial cable (USB Type-C data cable)!</p>

    <p>When the OpenCloudOS Stream image is written to the disk (SD card) and the board is powered on, U-Boot may not automatically detect the GRUB bootloader. Therefore, you need to open a U-Boot command line. To tell U-Boot where to boot from, select the appropriate command based on your storage medium, paste it into the U-Boot command line, and execute it.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>#SATA hard drive
setenv bootcmd 'load sata 0:1 0x84000000 EFI/BOOT/BOOTRISCV64.EFI; bootefi 0x84000000'; saveenv
#eMMC module
setenv bootcmd 'load mmc 0:1 0x84000000 EFI/BOOT/BOOTRISCV64.EFI; bootefi 0x84000000'; saveenv
#SD card
setenv bootcmd 'load mmc 1:1 0x84000000 EFI/BOOT/BOOTRISCV64.EFI; bootefi 0x84000000'; saveenv

</code></pre>
    </div>

    <p>After saveenv succeeds, you can try executing the boot command to boot OpenCloudOS Stream.</p>

    <p><img src="2025/08/08/Supports-OpenCloudOS-Adaptation-for-Milk-V-Megrez-Board/3.webp" alt="image" /></p>
  </li>
  <li>
    <p><strong>Connect to the Network</strong></p>

    <p>You can successfully connect to a specified WiFi via the command line:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>## Scan for nearby WiFi networks
nmcli device wifi scan
## Connect to an access point
nmcli device wifi connect 'SSID_of_desired_WiFi' password 'password'

</code></pre>
    </div>
  </li>
</ul>

<hr />

<center>This is a dividing line; the adaptation process below is narrated by Malachite</center>

<p><strong>Introduction to My Megrez Development Board</strong></p>

<p><img src="2025/08/08/Supports-OpenCloudOS-Adaptation-for-Milk-V-Megrez-Board/4.webp" alt="image" /></p>

<center>Megrez Assembly Diagram</center>

<p><strong>My Adaptation Plan</strong></p>

<p>Before I adapted OpenCloudOS, two operating systems had already been adapted for Megrez: Fedora and RockOS. The adaptation strategy for the OpenCloudOS kernel was: <strong>Port hardware-related source code like drivers and device trees from RockOS, which currently has the best compatibility with it.</strong> Here are the challenges and solutions I encountered during the kernel porting process.</p>

<p><strong>Looks Like Kernel Patches Need Merging</strong></p>

<p>The OpenCloudOS kernel is based on version 6.6.68 and includes many custom patches, while RockOS has not released this version—leading to “merge conflicts” between the two. To prevent issues like incomplete driver porting and overwriting of OpenCloudOS proprietary patches, I needed to read the source code, summarize the characteristics of files related to the EIC7700 SoC, and perform batch searches. For example, I placed both kernel source trees in the $HOME directory (~), then used the following command to identify driver code related to the SoC:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>for i in $(grep -ril -e 'eswin' -e 'eic7' -e 'win2030' -e 'sifive' .)
&gt; do
&gt;   if cmp -s $i ~/OpenCloudOS-Kernel/$i; then
&gt;       echo $i
&gt;   fi
&gt; done

</code></pre>
</div>

<p>Then, using the <code class="highlighter-rouge">meld</code> tool to compare the two directories, copying files missing in OpenCloudOS over, and for files existing in both, performing line-by-line comparison and selective integration to “resolve the merge conflicts.”</p>

<p><strong>Puzzling UAPI Header Files</strong></p>

<p>During porting, several UAPI header files failed the HDRTEST. However, they compiled successfully in RockOS, and the failures in OpenCloudOS were due to reasons like “contains C++ style comments, non-compliant with ANSI C standard,” “size_t undefined,” etc. Judging them as necessary for driver compilation and that these errors typically wouldn’t occur during user operation, these header files were added to the <code class="highlighter-rouge">no-header-test</code> list in <code class="highlighter-rouge">usr/include/Makefile</code>.</p>

<p><strong>From 6.6.73 to 6.6.88</strong></p>

<p>At the beginning of the adaptation work, I mistakenly thought that for porting convenience, I should select the RockOS kernel version 6.6.73, which had the closest version number and the least number of differing patches. However, after porting to a bootable state, I encountered several boot <code class="highlighter-rouge">dmesg</code> errors that couldn’t be resolved regardless of modifying the <code class="highlighter-rouge">config</code> or providing user-space firmware. Hardware like USB_DWC3 and mailbox failed to initialize properly.</p>

<p>Inspection revealed that the device tree in RockOS version 6.6.73 was still incomplete. Replacing the device tree required synchronous changes to the drivers, forcing a complete restart using the latest RockOS kernel source code, version 6.6.88. After initially completing the code porting, the kernel compilation <code class="highlighter-rouge">config</code> also needed adjustments.</p>

<p><strong>The NUMA Configuration Option Puzzled Me</strong></p>

<p>Initially, I tried exporting it from <code class="highlighter-rouge">/proc/config.gz</code> in OpenCloudOS Stream 23 QEMU, then…</p>

<div class="highlighter-rouge"><pre class="highlight"><code>make oldconfig

</code></pre>
</div>

<p>After compilation, I found that many options related to EIC7700 were not enabled by default, resulting in a kernel that couldn’t boot properly. Adjusting based on RockOS’s <code class="highlighter-rouge">eic7700_defconfig</code> was very cumbersome. In contrast, OpenCloudOS related options were quite clear in <code class="highlighter-rouge">menuconfig</code>. Therefore, I ultimately chose to create the <code class="highlighter-rouge">.config</code> from the <code class="highlighter-rouge">eic7700_defconfig</code> template, and then adjust specific options (like NUMA, Tencent Kernel features, etc.) in <code class="highlighter-rouge">menuconfig</code>. This should, in theory, make compiling a kernel that boots and drives various hardware normally much easier.</p>

<p>However, if following RockOS’s configuration by not setting NUMA, the compilation of <code class="highlighter-rouge">mm/memcontrol.c</code> would fail; enabling NUMA resulted in two early boot <code class="highlighter-rouge">dmesg</code> warnings about NUMA:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[    0.000000] NUMA:Warning: invalid memblk node 8[mem 0x0000000480000000-0x000000087ffccfff]
[    0.000000] NUMA:Faking a node at [mem 0x0000000080000000-0x00000010003fffff]

</code></pre>
</div>

<p>This occurred because the memory layout information obtained by the kernel from the device tree did not match the expected NUMA node configuration, causing a fallback to UMA. Since RockOS does not enable NUMA and the EIC7700X only has four cores, it was inferred that “the device tree does not support NUMA”. For full hardware adaptation, NUMA should be disabled—but this prevented successful compilation.</p>

<p><strong>Uncovered an OCS Kernel Patch BUG</strong></p>

<p>After reading the source code for troubleshooting, I found this was an issue introduced by a proprietary OpenCloudOS kernel patch [3]. When enabling MEMCG but disabling NUMA, some functions in <code class="highlighter-rouge">mm/memcontrol.c</code> would call other functions that weren’t compiled under those conditions, leading to compilation errors. This fault could also be reproduced on x86_64.</p>

<p>After managing to fix this defect, compilation succeeded when MEMCG was enabled but NUMA was disabled. The patch fixing this defect has currently been pushed to the latest development branch of OpenCloudOS-Kernel [4].</p>

<p><strong>The Joy of Success</strong></p>

<p>At this point, the kernel could compile normally, generate the <code class="highlighter-rouge">initramfs</code> via <code class="highlighter-rouge">dracut</code> based on the kernel modules, and boot into the system. After boot, aside from a <code class="highlighter-rouge">win2030-noc</code> error (the other two distributions adapted for Megrez also have the same issue, speculated to be caused by the RTC having no battery, leading to inability to write to the clock register), and errors from drivers for DSP, NPU, etc., failing to load due to missing user-space proprietary firmware, there were basically no other errors. Functional verification could then begin.</p>

<p><strong>Incidentally Verifying KVM Functionality</strong></p>

<ul>
  <li>
    <p><strong>Read CPU Information</strong></p>

    <p><img src="2025/08/08/Supports-OpenCloudOS-Adaptation-for-Milk-V-Megrez-Board/5.webp" alt="image" /></p>
  </li>
  <li>
    <p><strong>Compile and Run KVM Test Items from the Kernel Successfully</strong></p>

    <p><img src="2025/08/08/Supports-OpenCloudOS-Adaptation-for-Milk-V-Megrez-Board/6.webp" alt="image" /></p>
  </li>
  <li>
    <p><strong>Successfully Boot Ubuntu Image Using KVM and Large Memory in Snapshot Mode</strong></p>
  </li>
</ul>

<p>After downloading the u-boot-qemu DEB package from the RockOS software repository and extracting the S-mode ELF-format U-Boot (not available in the OpenCloudOS Stream software repository), execute:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>qemu-system-riscv64 --enable-kvm -M virt \
-cpu host -m 16384-smp 4-nographic \
-kernel ./uboot.elf \
-drive file=ubuntu-25.04-preinstalled-server-riscv64.img,format=raw,if=virtio,snapshot=on

</code></pre>
</div>

<p><img src="2025/08/08/Supports-OpenCloudOS-Adaptation-for-Milk-V-Megrez-Board/7.webp" alt="image" /></p>

<p>This method does not write changes to the disk image. In the future, it can be promoted to the package testing and development process of OpenCloudOS—simplifying deployment and providing a clean environment free from build dependency contamination with minimal performance loss.</p>

<p><strong>Eager to Verify Tencent Kernel Features</strong></p>

<ul>
  <li>
    <p><strong>Allow Non-Privileged Users to Bind Specific Low-Numbered Ports</strong></p>

    <p><img src="2025/08/08/Supports-OpenCloudOS-Adaptation-for-Milk-V-Megrez-Board/8.webp" alt="image" /></p>
  </li>
  <li>
    <p><strong>Load the aegis Kernel Module, Read execve System Call Audit Reports</strong></p>

    <p><img src="2025/08/08/Supports-OpenCloudOS-Adaptation-for-Milk-V-Megrez-Board/9.webp" alt="image" /></p>
  </li>
  <li>
    <p><strong>Use the Same Kernel Module to Read Socket Audit Reports</strong></p>

    <p><img src="2025/08/08/Supports-OpenCloudOS-Adaptation-for-Milk-V-Megrez-Board/10.webp" alt="image" /></p>
  </li>
</ul>

<p><strong>A Few More Words</strong></p>

<p>Currently, the OpenCloudOS Stream kernel adapted for the Milk-V Megrez platform has completed adaptation for most hardware functions (including KVM) and retains proprietary features such as Enhanced MM and Tencent Kernel. The current OpenCloudOS Stream image is not fully complete—it lacks a usable desktop environment. Further steps are needed, including integrating a user-space rootfs (no additional configuration required), firmware and drivers, and improving the boot process for general users.</p>

<p><strong>The Road Ahead is Long</strong></p>

<ul>
  <li><strong>Functional Adaptation Direction:</strong> Issues related to ESWIN SDK, NPU kernel drivers, user-space GPU drivers, and graphics stacks require support and collaboration from ESWIN officials.</li>
  <li><strong>Performance Optimization Direction:</strong> Conduct targeted optimization work combining OpenCloudOS’s kernel characteristics and cloud-native business scenarios.</li>
</ul>

<center>About Intern Malachite</center>

<center>"Enjoys playing with Linux development boards, proficient in shell and VBA."</center>

<p><strong>Reference Links</strong></p>

<p>[1] https://mirrors.opencloudos.tech/opencloudos-stream/releases/23/images/riscv64/sdcard/ocs_developer_sdcard-megrez.img.xz</p>

<p>[2] https://gitee.com/malachite/OpenCloudOS-Kernel/tree/p550-dev/</p>

<p>[3] https://gitee.com/OpenCloudOS/OpenCloudOS-Kernel/commit/321e018e4b3fa18cbcc73a97f9cba48a8f911624</p>

<p>[4] https://gitee.com/OpenCloudOS/OpenCloudOS-Kernel/pulls/438</p>

                            </div>
                        </div>
                        <div class="post-navigation">
                            
                            <a href="/post.html#news-list" class="btn btn-main news-list-link">Return</a>
                            
                        </div>

                    </div>
                </div>
            </div>
        </section>
    </main>
</body>
<!-- Footer -->
<!-- 
<footer class="footer">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="footer-manu">
          <ul>
            <li><a href="about.html">About Us</a></li>
            <li><a href="contact.html">Contact us</a></li>
            <li><a href="service.html">How it works</a></li>
            <li><a href="faq.html">FAQ</a></li>
            <li><a href="pricing.html">Pricing</a></li>
          </ul>
        </div>
        <p class="copyright mb-0">Copyright
          <script>document.write(new Date().getFullYear())</script> &copy; Designed & Developed by <a
            href="http://www.themefisher.com">Themefisher</a>. All rights reserved.
          <br> Get More <a href="https://themefisher.com/free-bootstrap-templates/">Free Bootstrap
            Templates</a>
        </p>
      </div>
    </div>
  </div>
</footer> -->


<footer class="footer">
  <div class="footer-top">
    <div class="container">
      <div class="row">
        <div class="col-lg-4 col-md-4 ">
          <h4>Contact</h4>
          <p>
            Weiwei Li (CEO) <br>
            <!-- Phone:  <br>
          Fax:  <br> -->
            <strong>Email:</strong> contact@kubuds.cn<br>
            <strong>Address:</strong> Room 108, 1st Floor, Building 1, No. 88 Gaoyi Road, Baoshan District, Shanghai<br>
          </p>
        </div>

        <div class="col-lg-4 col-md-4 ">
          <h4>Link</h4>
          <ul>
            <li><i class="bx bx-chevron-right"></i><a href="https://github.com/kubuds"> GitHub</a></li>
          </ul>
        </div>
        
      </div>
    </div>

  </div>
  <div class="footer-copyright container">
    <div class="me-md-auto text-center ">
      <div class="copyright">
        <p>Copyright &copy; 2025 Kubuds</p>
      </div>
    </div>
  </div>
</footer>

<script>
    // 新闻详情页面滚动位置保持功能
    (function () {
        const NEWS_LIST_SCROLL_KEY = 'newsListScrollPosition';
        const NEWS_LIST_TIMESTAMP_KEY = 'newsListTimestamp';

        // 为所有返回新闻列表的链接添加点击事件监听器
        function addNewsListLinkListeners() {
            const newsListLinks = document.querySelectorAll('.news-list-link');
            newsListLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    // 不需要在这里保存位置，因为位置应该在从列表页进入详情页时已经保存了
                    // 这里只需要确保链接正常工作
                });
            });
        }

        // 新闻详情页图片懒加载
        function initNewsImageLazyLoading() {
            const images = document.querySelectorAll('.post-content img');
            
            if (images.length === 0) return;
            
            const imageObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        
                        // 添加加载状态
                        img.style.opacity = '0.7';
                        img.style.transition = 'opacity 0.3s ease';
                        
                        // 预加载图片
                        const tempImg = new Image();
                        tempImg.onload = function() {
                            img.style.opacity = '1';
                            img.classList.add('loaded');
                        };
                        tempImg.onerror = function() {
                            img.style.opacity = '1';
                            img.alt = '图片加载失败';
                            img.classList.add('loaded');
                        };
                        tempImg.src = img.src;
                        
                        imageObserver.unobserve(img);
                    }
                });
            }, {
                rootMargin: '100px 0px',
                threshold: 0.1
            });
            
            images.forEach(img => {
                // 为所有图片添加懒加载属性
                img.setAttribute('loading', 'lazy');
                imageObserver.observe(img);
            });
        }

        // 页面加载完成后执行
        document.addEventListener('DOMContentLoaded', function () {
            // 添加新闻列表链接监听器
            addNewsListLinkListeners();
            
            // 初始化图片懒加载
            initNewsImageLazyLoading();
        });
    })();
</script>

</html>